<script src='http://cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js'></script>
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js'></script>
<script src='schema-manipulator.js'></script>
<div class='test'></div>

<style>
	*{
		font-family:arial;
	}
	.object,
	.array{
		padding:10px;
		background:rgba(0,0,0,0.1);
		margin-bottom:10px;
	}
	label{
		display:block;
	}
</style>
<script>

var schema = {
	type: 'object',
	properties: {
		foo: {
			type: 'string',
			label:'sample string'
		},
		foo1: {
			type: 'number',
			label:'sample number'
		},
		foo2: {
			type: 'integer',
			label:'sample integer'
		},
		foo3: {
			type: 'object',
			label:'sample nested object',
			properties: {
				foo: {
					type: 'string',
					label:'sample string'
				},
				foo1: {
					type: 'number',
					label:'sample number'
				},
				foo2: {
					type: 'integer',
					label:'sample integer'
				}
			}
		},
		arr: {
			type: 'array',
			label:'sample array of primitives',
			items: {
				type: 'string'
			}
		},
		arr2: {
			type: 'array',
			label:'sample array of objects',
			items: {
				type: 'object',
				properties: {
					foo: {
						type: 'string',
						label:'sample string'
					},
					foo1: {
						type: 'number',
						label:'sample number'
					},
					foo2: {
						type: 'integer',
						label:'sample integer'
					}
				}
			}
		}
	}
};

var item = new SchemaItem(schema);

document.querySelector('.test').appendChild(item.form({
	foo: 'azaza',
	arr: ['bla', 'yarrrr']
}));

document.querySelector('.test > .object').addEventListener('changeObj', function (e) {
	console.log('vanilla changeObj', e.detail);
}, false);
document.querySelector('.test > .object').addEventListener('changeObjArrayAdd', function (e) {
	console.log('vanilla changeObjArrayAdd', e.detail);
}, false);

$('.test > .object').on('changeObj', function(e){
	console.log('jQuery changeObj', e.originalEvent.detail);
});
$('.test > .object').on('changeObjArrayAdd', function(e){
	console.log('jQuery changeObjArrayAdd', e.originalEvent.detail);
});


</script>
